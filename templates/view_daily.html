<!DOCTYPE html>
<html>
<head>
<title>Daily Goals</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<style>
body{
background:#f3f4f6;
}

.top-bar{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:20px;
}

.back-btn{
text-decoration:none;
background:#15803d;
color:white;
padding:8px 16px;
border-radius:10px;
font-size:14px;
}

.page-title{
color:#15803d;
font-weight:700;
}

.list-header{
display:flex;
justify-content:space-between;
padding:10px 20px;
background:#dcfce7;
border-radius:10px;
font-weight:700;
color:#065f46;
margin-bottom:10px;
}

.goal-card{
background:white;
padding:15px 20px;
border-radius:14px;
margin-bottom:12px;
display:flex;
justify-content:space-between;
align-items:center;
box-shadow:0 4px 12px rgba(0,0,0,.08);
}
</style>
</head>

<body>

<div class="container mt-4">

<div class="top-bar">
<h3 class="page-title">Your Daily Goals</h3>

<div>
    <a href="/" class="btn btn-secondary shadow rounded-pill px-4">
⬅ Back to Dashboard
</a>

<button class="btn btn-success"
data-bs-toggle="modal"
data-bs-target="#dailyModal">
➕ Add Daily Goal
</button>

<!-- <a href="/" class="back-btn">⬅ Dashboard</a> -->
</div>
</div>

<div class="list-header">
<span>Goal</span>
<span>Action</span>
</div>

{% for g in goals %}

<div class="goal-card">

<span>{{g.DailyGoal}}</span>

<div>

<button class="btn btn-info btn-sm"
data-bs-toggle="modal"
data-bs-target="#read{{g.row}}">
Read
</button>

{% if session['role']=="Teacher" %}

<button class="btn btn-warning btn-sm"
data-bs-toggle="modal"
data-bs-target="#update{{g.row}}">
Update
</button>

<a href="/delete_daily/{{g.row}}"
onclick="return confirm('Delete this goal?')"
class="btn btn-danger btn-sm">
Delete
</a>

{% endif %}
</div>


</div>

<!-- READ MODAL -->
<div class="modal fade" id="read{{g.row}}">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content p-3">
<div class="modal-header">
<h5>Daily Goal Details</h5>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>

<p><b>Goal:</b> {{g.DailyGoal}}</p>
<p><b>Reflection:</b> {{g.Reflection}}</p>
<p><b>Went Well:</b> {{g.WentWell}}</p>
<p><b>Challenges:</b> {{g.Challenges}}</p>
<p><b>Left:</b> {{g.Left}}</p>
<p><b>Status:</b> {{g.Status}}</p>
<p><b>Day:</b> {{g.Day}}</p>

</div>
</div>
</div>

<!-- UPDATE MODAL -->
<div class="modal fade" id="update{{g.row}}">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content p-3">
<div class="modal-header">
<h5>Update Daily Goal</h5>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>
<form action="/save_update_daily/{{g.row}}" method="POST">

<textarea name="goal" class="form-control mb-2">{{g.DailyGoal}}</textarea>

<textarea name="reflection" class="form-control mb-2">{{g.Reflection}}</textarea>

<textarea name="wentwell" class="form-control mb-2">{{g.WentWell}}</textarea>

<textarea name="challenges" class="form-control mb-2">{{g.Challenges}}</textarea>

<textarea name="left" class="form-control mb-2">{{g.Left}}</textarea>
<input type="date" name="day" value="{{g.Day}}" class="form-control mb-2">

<select name="status" class="form-control mb-2">
<option value="In Progress" {% if g.Status=="In Progress" %}selected{% endif %}>In Progress</option>
<option value="Completed" {% if g.Status=="Completed" %}selected{% endif %}>Completed</option>
</select>

<button class="btn btn-success w-100">Save</button>

</form>

</div>
</div>
</div>

{% endfor %}

</div>

<!-- ADD MODAL -->
<div class="modal fade" id="dailyModal">
<div class="modal-dialog modal-dialog-centered">
<div class="modal-content p-4">
<div class="modal-header">
<h4>New Daily Goal</h4>
<button class="btn-close" data-bs-dismiss="modal"></button>
</div>
<p class="text-muted">Set a goal to accomplish today.</p>

<form action="/save_daily" method="POST">

<label>What do you want to achieve?</label>
<textarea name="goal" class="form-control mb-3"
placeholder="e.g., Complete 5 React exercises" required></textarea>

<label>Select Day</label>
<input type="date" name="day" class="form-control mb-4" required>

<div class="d-flex justify-content-end gap-2">
<button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
<button class="btn btn-primary px-4">Add Goal</button>
</div>

</form>

</div>
</div>
</div>

</body>
</html>
